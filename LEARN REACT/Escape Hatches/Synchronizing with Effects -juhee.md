# 3. Effectì™€ ë™ê¸°í™”í•˜ê¸°

ì»´í¬ë„ŒíŠ¸ê°€ ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ë™ê¸°í™”í•´ì•¼ í•˜ëŠ” ê²½ìš°ê°€ ìˆë‹¤.
- stateë¥¼ ê¸°ë°˜ìœ¼ë¡œ reactê°€ ì•„ë‹Œ ì»´í¬ë„ŒíŠ¸ë¥¼ ì œì–´í•˜ê±°ë‚˜
- ì„œë²„ ì—°ê²°ì„ ì„¤ì •í•˜ê±°ë‚˜
- ì»´í¬ë„ŒíŠ¸ê°€ í™”ë©´ì— ë‚˜íƒ€ë‚  ë•Œ ë¶„ì„ ë¡œê·¸ë¥¼ ë³´ë‚´ê¸° ìœ„í•´

Effectë¥¼ ì‚¬ìš©í•˜ë©´ ë Œë”ë§ ì´í›„ì— ì½”ë“œë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆì–´ì„œ ì´ëŸ° ì¼ë“¤ì„ í•  ìˆ˜ ìˆë‹¤.

## 3-1. Effectê°€ ë­”ê°€ìš”

### 1) ë Œë”ë§ ì½”ë“œì™€ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
ìš°ì„  React ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì—ì„œ ë‘ ê°€ì§€ ìœ í˜•ì˜ ë¡œì§ì„ ë‹¤ì‹œ ë– ì˜¬ë ¤ë³´ì

#### ë Œë”ë§ ì½”ë“œ
- ë Œë”ë§ ì½”ë“œëŠ” ì»´í¬ë„ŒíŠ¸ì˜ ìµœìƒìœ„ì— ì¡´ì¬í•œë‹¤.
- ì—¬ê¸°ì„œ propsì™€ ìƒíƒœë¥¼ ê°€ì ¸ì™€ ë³€í™˜í•˜ê³ , í™”ë©´ì— í‘œì‹œí•˜ë ¤ëŠ” JSXë¥¼ ë°˜í™˜í•œë‹¤.
- ì´ ë Œë”ë§ ì½”ë“œëŠ” ìˆœìˆ˜í•´ì•¼ í•œë‹¤. (ìˆ˜í•™ ê³µì‹ì²˜ëŸ¼ ê²°ê³¼ë§Œì„ ê³„ì‚°í•´ì•¼ í•œë‹¤. ë‹¤ë¥¸ ì¼ì€ í•˜ì§€ ì•Šì•„ì•¼ í•œë‹¤.)

#### ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
- ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ëŠ” ì»´í¬ë„ŒíŠ¸ ë‚´ì˜ ì¤‘ì²©ëœ í•¨ìˆ˜ë¡œ, ë‹¨ì§€ ê³„ì‚°í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì‹¤ì œë¡œ ì‘ì—…ì„ ìˆ˜í–‰í•œë‹¤.
- íŠ¹ì • ì‚¬ìš©ì ë™ì‘ì— ì˜í•´ ë°œìƒí•˜ëŠ” side effect(ex. í”„ë¡œê·¸ë¨ì˜ ìƒíƒœ ë³€ê²½)ë¥¼ í¬í•¨í•œë‹¤.

ë•Œë¡œëŠ” ì´ ë‘˜ë§Œìœ¼ë¡œ ì¶©ë¶„í•˜ì§€ ì•Šë‹¤.

### 2) ex. ì±„íŒ… ì„œë²„ì— ì—°ê²°í•˜ê¸°
í™”ë©´ì— í‘œì‹œë  ë•Œë§ˆë‹¤ ì±„íŒ… ì„œë²„ì— ì—°ê²°í•´ì•¼ í•˜ëŠ” ChatRoom ì»´í¬ë„ŒíŠ¸ê°€ ìˆë‹¤ê³  í•´ë³´ì.
ì„œë²„ì— ì—°ê²°í•˜ëŠ” ê²ƒì€ ìˆœìˆ˜í•œ ê³„ì‚°ì´ ì•„ë‹Œ side effectì´ë¯€ë¡œ ë Œë”ë§ ì¤‘ì—ëŠ” ì¼ì–´ë‚  ìˆ˜ ì—†ë‹¤.
ë˜í•œ ChatRoomì´ í‘œì‹œë˜ê²Œ í•˜ëŠ” íŠ¹ì •í•œ ì´ë²¤íŠ¸ê°€ ì¡´ì¬í•˜ì§€ë„ ì•ŠëŠ”ë‹¤.

#### ğŸ§ ì„œë²„ì— ì—°ê²°í•˜ëŠ” ì‘ì—…ì´ ìˆœìˆ˜í•œ ê³„ì‚°ì´ ì•„ë‹Œ ì´ìœ 
- ì™¸ë¶€ ìƒíƒœì— ì˜í–¥ì„ ë°›ëŠ”ë‹¤.
ì„œë²„ì— ì—°ê²°í•˜ë ¤ë©´ ë„¤íŠ¸ì›Œí¬ ìƒíƒœ, ì„œë²„ì˜ ìƒíƒœ, ì¸ì¦ ì •ë³´ ë“± ì™¸ë¶€ ì‹œìŠ¤í…œì˜ ìƒíƒœì— ì˜ì¡´í•´ì•¼ í•œë‹¤.
- ë¶€ì‘ìš©ì„ ë°œìƒì‹œí‚¨ë‹¤.
ì„œë²„ì— ì—°ê²°í•˜ëŠ” ë™ì‘ì€ ë„¤íŠ¸ì›Œí¬ë¥¼ í†µí•´ ë©”ì‹œì§€ë¥¼ ë³´ë‚´ê³ , ì„œë²„ì˜ ìƒíƒœë¥¼ ë³€ê²½í•˜ë©°, í´ë¼ì´ì–¸íŠ¸ì˜ ìƒíƒœì—ë„ ì˜í–¥ì„ ì¤€ë‹¤. ì´ëŸ¬í•œ ë³€ê²½ì‚¬í•­ì€ ì˜ˆì¸¡í•  ìˆ˜ ì—†ìœ¼ë©°, ê°™ì€ ì…ë ¥ ê°’ì— ëŒ€í•´ì„œë„ ì™¸ë¶€ ì¡°ê±´ì— ë”°ë¼ ë‹¤ë¥¸ ê²°ê³¼ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤.
- ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ì˜ ìƒí˜¸ì‘ìš©ì„ í¬í•¨í•œë‹¤.
ì„œë²„ ì—°ê²°ì€ íŒŒì¼ ì‹œìŠ¤í…œ ì ‘ê·¼, ë„¤íŠ¸ì›Œí¬ í†µì‹  ë“± ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ì˜ ìƒí˜¸ì‘ìš©ì„ í•„ìš”ë¡œ í•œë‹¤. ì´ëŸ¬í•œ ìƒí˜¸ì‘ìš©ì€ í•¨ìˆ˜ì˜ ë²”ìœ„ë¥¼ ë„˜ì–´ì„œëŠ” íš¨ê³¼ë¥¼ ë°œìƒì‹œí‚¨ë‹¤.

ë”°ë¼ì„œ ìˆœìˆ˜í•œ ê³„ì‚°ì´ ì•„ë‹Œ ì´ 'ì„œë²„ì— ì—°ê²°í•˜ëŠ” ì‘ì—…'ì„ ë Œë”ë§í•˜ëŠ” ë™ì•ˆì— ì²˜ë¦¬í•  ìˆ˜ ì—†ë‹¤. 

#### ğŸ¤¨ ë Œë”ë§ì´ ìˆœìˆ˜í•œ ê³„ì‚° ê³¼ì •ì´ì–´ì•¼ í•˜ëŠ” ì´ìœ  ë³µìŠµ!
- ì¬ì§„ì…ì„± (Reentrancy)
ë Œë”ë§ ê³¼ì •ì€ ì¤‘ë‹¨ë˜ê±°ë‚˜ ë‹¤ì‹œ ì‹œì‘ë  ìˆ˜ ìˆë‹¤.
side effectê°€ ë Œë”ë§ ê³¼ì • ì¤‘ì— ë°œìƒí•œë‹¤ë©´, ì´ëŸ° ì¤‘ë‹¨ê³¼ ì¬ì‹œì‘ìœ¼ë¡œ ì¸í•´ ì˜ˆì¸¡ ë¶ˆê°€ëŠ¥í•œ ê²°ê³¼ê°€ ë°œìƒí•  ìˆ˜ ìˆê² ì§€!
- ì„±ëŠ¥ ìµœì í™”
ìˆœìˆ˜í•œ ë Œë”ë§ì„ í†µí•´ ReactëŠ” ë¶ˆí•„ìš”í•œ ë Œë”ë§ì„ ë°©ì§€í•˜ê³ , ì»´í¬ë„ŒíŠ¸ì˜ ë¦¬ë Œë”ë§ì„ íš¨ìœ¨ì ìœ¼ë¡œ ê³„ì‚°í•  ìˆ˜ ìˆëŠ”ë°, ë¶€ì‘ìš©ì´ í¬í•¨ë˜ë©´ ì´ëŸ¬í•œ ìµœì í™”ê°€ ì–´ë ¤ì›Œì§„ë‹¤.

ì´ëŸ¬í•œ ì´ìœ ë¡œ ReactëŠ” ë Œë”ë§ê³¼ side effectë¥¼ ë¶„ë¦¬í•˜ê³ , useEffect ê°™ì€ í›…ì„ ì œê³µí•´ì„œ ì»´í¬ë„ŒíŠ¸ê°€ í™”ë©´ì— ì»¤ë°‹ëœ ì´í›„ì— side effectë¥¼ ì•ˆì „í•˜ê²Œ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ ì„¤ê³„ë˜ì–´ ìˆë‹¤. ğŸ‘

ë”°ë¼ì„œ ì±„íŒ… ì„œë²„ì— ì—°ê²°í•˜ëŠ” ì‘ì—…ì€ ë Œë”ë§ ê³¼ì •ì—ì„œ ë¶„ë¦¬í•˜ì—¬ useEffect ê°™ì€ í›…ì„ í†µí•´ ê´€ë¦¬í•´ì•¼ í•œë‹¤.
ì´ë¥¼ í†µí•´ ì»´í¬ë„ŒíŠ¸ì˜ ë Œë”ë§ì´ ì˜ˆì¸¡ ê°€ëŠ¥í•˜ê³  ìˆœìˆ˜í•œ ê³„ì‚°ìœ¼ë¡œ ë‚¨ì•„ìˆê²Œ í•˜ë©´ì„œ, í•„ìš”í•œ side effectëŠ” ì•ˆì „í•˜ê²Œ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤.
ì¦‰, useEffectëŠ” ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ëœ í›„ì— sideEffectë¥¼ ì‹¤í–‰í•´ ë Œë”ë§ ê³¼ì • ìì²´ëŠ” ìˆœìˆ˜í•¨ì„ ìœ ì§€í•˜ë„ë¡ í•´ì¤€ë‹¤.

### 3) Effect
- Effectë¥¼ ì‚¬ìš©í•˜ë©´ íŠ¹ì •í•œ ì´ë²¤íŠ¸ê°€ ì•„ë‹Œ ë Œë”ë§ ìì²´ì— ì˜í•´ ë°œìƒí•˜ëŠ” ë¶€ìˆ˜ íš¨ê³¼ë¥¼ ì§€ì •í•  ìˆ˜ ìˆë‹¤.
- ì„œë²„ ì—°ê²°ì„ ì„¤ì •í•˜ëŠ” ê²ƒì€ ì»´í¬ë„ŒíŠ¸ê°€ ë‚˜íƒ€ë‚˜ê²Œ í•œ ìƒí˜¸ì‘ìš©ì´ ë¬´ì—‡ì´ë“  ìƒê´€ ì—†ì´ ì¼ì–´ë‚˜ì•¼ í•˜ê¸° ë•Œë¬¸ì— Effectë¡œ ë¶„ë¥˜ëœë‹¤.
- EffectsëŠ” í™”ë©´ì´ ì—…ë°ì´íŠ¸ëœ í›„ ì»¤ë°‹ì˜ ëì— ì‹¤í–‰ëœë‹¤.
ì´ ì‹œì ì€ ë„¤íŠ¸ì›Œí¬ë‚˜ ì œ 3ì ë¼ì´ë¸ŒëŸ¬ë¦¬ì™€ ê°™ì€ ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ React ì»´í¬ë„ŒíŠ¸ë¥¼ ë™ê¸°í™”í•˜ê¸°ì— ì¢‹ì€ ì‹œê°„ì´ë‹¤.

## 3-2. Effectê°€ í•„ìš”í•˜ì§€ ì•Šì„ ìˆ˜ë„ ìˆë‹¤
- ë‹¹ì¥ ì»´í¬ë„ŒíŠ¸ì— Effectë¥¼ ì¶”ê°€í•˜ë ¤ê³  ì„œë‘ë¥´ì§€ ë§ ê²ƒ!
- EffectëŠ” ì¼ë°˜ì ìœ¼ë¡œ React ì½”ë“œì—ì„œ **ë²—ì–´ë‚˜ì„œ** ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ë™ê¸°í™”í•˜ê¸° ìœ„í•´ ì‚¬ìš©ëœë‹¤.
ì˜ˆë¥¼ ë“¤ë©´ ë¸Œë¼ìš°ì € API, third-party ìœ„ì ¯, ë„¤íŠ¸ì›Œí¬ ë“±

#### ë¬´í•œë£¨í”„ ì¡°ì‹¬!
ê¸°ë³¸ì ìœ¼ë¡œ EffectëŠ” ë§¤ ëœë”ë§ í›„ì— ì‹¤í–‰ëœë‹¤.
ë”°ë¼ì„œ ì•„ë˜ì™€ ê°™ì€ ì½”ë“œëŠ” ë¬´í•œ ë£¨í”„ì— ë¹ ì§€ê²Œ ëœë‹¤.

```jsx
const [count, setCount] = useState(0);
useEffect(() => {
  setCount(count + 1);
});
```

ë™ì‘ì„ ì‚´í´ë³´ë©´, 
ë Œë”ë§ì˜ ê²°ê³¼ë¡œ Effectê°€ ì‹¤í–‰ë¨ -> stateë¥¼ ì„¤ì •í•´ì„œ ë Œë”ë§ì„ ì´‰ë°œí•¨ -> ë Œë”ë§ì´ ë°œìƒí•´ Effectê°€ ì‹¤í–‰ë¨ ->  stateë¥¼ ì„¤ì •í•´ì„œ ë Œë”ë§ì„ ì´‰ë°œí•¨ ...

EffectëŠ” ë³´í†µ ì»´í¬ë„ŒíŠ¸ë¥¼ ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ë™ê¸°í™”í•˜ëŠ”ë° ì‚¬ìš©ë˜ì–´ì•¼ í•œë‹¤.
ì™¸ë¶€ ì‹œìŠ¤í…œì´ ì—†ê³  ë‹¤ë¥¸ stateë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì¼ë¶€ stateë¥¼ ì¡°ì •í•˜ê¸°ë§Œ ì›í•œë‹¤ë©´, Effectê°€ í•„ìš”í•˜ì§€ ì•Šì„ ìˆ˜ë„ ìˆë‹¤.

## 3-3. Effect ì‘ì„± ë°©ë²•

### 1) Effectë¥¼ ì„ ì–¸í•œë‹¤.

- useEffectë¥¼ importí•˜ê³  ì»´í¬ë„ŒíŠ¸ì˜ ìµœìƒìœ„ ë ˆë²¨ì—ì„œ í˜¸ì¶œí•œë‹¤.
- ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ë  ë•Œë§ˆë‹¤ í™”ë©´ì„ ì—…ë°ì´íŠ¸í•˜ê³  ë‚˜ì„œ useEffect ë‚´ë¶€ì˜ ì½”ë“œê°€ ì‹¤í–‰ëœë‹¤.

```js
import { useEffect } from 'react';

function MyComponent() {
  useEffect(() => {

  });
  return <div />;
}
```

ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ë™ê¸°í™”í•˜ëŠ” ì˜ˆì‹œë¥¼ ì‚´í´ë³´ì!
ë¸Œë¼ìš°ì €ì˜ ë¹ŒíŠ¸ì¸ íƒœê·¸ì¸ `<video>`ë¥¼ ê°€ì§€ê³  ìˆëŠ” `<VideoPlayer>` ì»´í¬ë„ŒíŠ¸ê°€ ìˆë‹¤.
ì´ ì»´í¬ë„ŒíŠ¸ì— isPlaying propì„ ì „ë‹¬í•´ì„œ ì¬ìƒ/ì¼ì§€ì¤‘ì§€ ì—¬ë¶€ë¥¼ ì œì–´í•  ê²ƒì´ë‹¤.

```jsx
function VideoPlayer({ src, isPlaying }) {
  // TODO: do something with isPlaying
  return <video src={src} />;
}
```

ë¸Œë¼ìš°ì €ì˜ `<video>` íƒœê·¸ì—ëŠ” isPlaying propì´ ì—†ë‹¤.
ì´ë¥¼ ì œì–´í•˜ëŠ” ìœ ì¼í•œ ë°©ë²•ì€ DOM ìš”ì†Œì—ì„œ play(), pause() ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ëŠ” ê²ƒì´ë‹¤.
ë”°ë¼ì„œ isPlayingì„ play(), pause()ì™€ ê°™ì€ í•¨ìˆ˜ í˜¸ì¶œê³¼ ë™ê¸°í™”ì‹œì¼œì•¼ í•œë‹¤.

âŒ ì•„ë˜ì˜ ì½”ë“œëŠ” ë Œë”ë§ ì¤‘ì— play(), pause() í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë ¤ í•˜ê³  ìˆë‹¤.
ì´ëŸ° ì˜¤ë¥˜ê°€ ë‚¨ ğŸ‘‡

![](https://velog.velcdn.com/images/e_juhee/post/d76f575c-6e17-4baf-b59f-bbf3cde84110/image.png)

```jsx
function VideoPlayer({ src, isPlaying }) {
  const ref = useRef(null);

  if (isPlaying) {
    ref.current.play();  // Calling these while rendering isn't allowed.
  } else {
    ref.current.pause(); // Also, this crashes.
  }

  return <video ref={ref} src={src} loop playsInline />;
}
```

Reactì—ì„œ ë Œë”ë§ì€ DOM ìˆ˜ì •ê³¼ ê°™ì€ side effectë¥¼ í¬í•¨í•˜ë©´ ì•ˆ ëœë‹¤.
ë˜í•œ, ì´ ì‹œì ì—ëŠ” DOMì´ ì•„ì§ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤. ReactëŠ” JSXë¥¼ ë°˜í™˜í•˜ê¸° ì „ê¹Œì§€ëŠ” ì–´ë–¤ DOMì„ ìƒì„±í•  ì§€ ëª¨ë¥´ê¸° ë•Œë¬¸ì´ë‹¤.

ë”°ë¼ì„œ useEffectë¡œ ê°ì‹¸ ë Œë”ë§ ê³„ì‚° ë°–ìœ¼ë¡œ ì˜®ê²¨ì•¼ í•œë‹¤.

```jsx
import { useEffect, useRef } from 'react';

function VideoPlayer({ src, isPlaying }) {
  const ref = useRef(null);

  useEffect(() => {
    if (isPlaying) {
      ref.current.play();
    } else {
      ref.current.pause();
    }
  });

  return <video ref={ref} src={src} loop playsInline />;
}
```

### 2) ì˜ì¡´ì„±ì„ ëª…ì‹œí•œë‹¤.
- EffectëŠ” ë§¤ ë Œë”ë§ í›„ì— ì‹¤í–‰ë˜ëŠ” ê²ƒì´ defaultì´ë‹¤.
- ì´ê²ƒì´ ì›ì¹˜ ì•ŠëŠ” ë™ì‘ì¼ ìˆ˜ ìˆê³ , ë˜ëŠ” ë¶ˆí•„ìš”í•˜ê²Œ ì†ë„ê°€ ëŠë ¤ì§ˆ ìˆ˜ ìˆë‹¤. ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ì˜ ë™ê¸°í™”ê°€ í•­ìƒ ì¦‰ê°ì ìœ¼ë¡œ í•„ìš”í•œ ê²ƒì€ ì•„ë‹í…Œë‹ˆ..
- ë”°ë¼ì„œ ëŒ€ë¶€ë¶„ì˜ EffectëŠ” ë§¤ ë Œë”ë§ ë§ˆë‹¤ê°€ ì•„ë‹Œ í•„ìš”í•  ë•Œë§Œ ë‹¤ì‹œ ì‹¤í–‰í•´ì•¼ í•œë‹¤.

ì˜ì¡´ì„±ì„ ì§€ì •í•´ì„œ ì´ë¥¼ ì œì–´í•  ìˆ˜ ìˆë‹¤.

ì•„ë˜ì˜ ì˜ˆì‹œì—ì„œëŠ” inputì— ê°’ì´ ì…ë ¥ë˜ë©´ stateê°€ ì—…ë°ì´íŠ¸ë˜ì–´ ë¦¬ë Œë”ë§ì´ ì¼ì–´ë‚˜ê³  Effectê°€ ì‹¤í–‰ëœë‹¤.
ë‹¤ì‹œ ë§í•˜ìë©´, ê°’ì„ ì…ë ¥í•  ë•Œë§ˆë‹¤ Effect ë‚´ë¶€ì˜ ì½”ë“œê°€ ì‹¤í–‰ë˜ê³  ìˆë‹¤!!

```jsx
function VideoPlayer({ src, isPlaying }) {
  const ref = useRef(null);

  useEffect(() => {
    if (isPlaying) {
      console.log('Calling video.play()');
      ref.current.play();
    } else {
      console.log('Calling video.pause()');
      ref.current.pause();
    }
  });

  return <video ref={ref} src={src} loop playsInline />;
}

export default function App() {
  const [isPlaying, setIsPlaying] = useState(false);
  const [text, setText] = useState('');
  return (
    <>
      <input value={text} onChange={e => setText(e.target.value)} />
      <button onClick={() => setIsPlaying(!isPlaying)}>
        {isPlaying ? 'Pause' : 'Play'}
      </button>
      <VideoPlayer
        isPlaying={isPlaying}
        src="https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4"
      />
    </>
  );
}
```

ì´ëŸ° ë¶ˆí•„ìš”í•œ ì¬ì‹¤í–‰ì„ ë§‰ìœ¼ë ¤ë©´ useEffect í˜¸ì¶œì˜ ë‘ ë²ˆì§¸ ì¸ìë¡œ ì˜ì¡´ì„± ë°°ì—´ì„ ì§€ì •í•˜ë©´ ëœë‹¤.

ìš°ì„  ë¹ˆ ë°°ì—´ì„ ì¶”ê°€í•˜ë©´ ì´ëŸ° ì˜¤ë¥˜ê°€ í‘œì‹œëœë‹¤.

```jsx
  useEffect(() => {
    // ...
  }, []);
```

![](https://velog.velcdn.com/images/e_juhee/post/2b901be2-d860-494a-ac01-c53475e4737c/image.png)

Effect ë‚´ë¶€ì˜ ì½”ë“œê°€ `isPlaying`ì— ì˜ì¡´í•´ì„œ ìˆ˜í–‰í•  ì‘ì—…ì„ ê²°ì •í•˜ëŠ”ë°, ì´ ì˜ì¡´ì„±ì´ ëª…ì‹œì ìœ¼ë¡œ ì„ ì–¸ë˜ì§€ ì•Šì•„ì„œ ë‚˜ëŠ” ì˜¤ë¥˜ì´ë‹¤.
ì˜ì¡´ì„± ë°°ì—´ì— `isPlaying`ì„ ì¶”ê°€í•´ë³´ì!

```jsx
  useEffect(() => {
    if (isPlaying) { // It's used here...
      // ...
    } else {
      // ...
    }
  }, [isPlaying]); // ...so it must be declared here!
```

ì´ì œ `isPlaing`ì´ ì´ì „ ë Œë”ë§ ë•Œì˜ ê°’ê³¼ ê°™ìœ¼ë©´ Effectë¥¼ ì‹¤í–‰í•˜ì§€ ì•ŠëŠ”ë‹¤.

ì´ ì˜ì¡´ì„± ë°°ì—´ì—ëŠ” ì—¬ëŸ¬ ê°œì˜ ì˜ì¡´ì„±ì„ í¬í•¨ì‹œí‚¬ ìˆ˜ ìˆë‹¤.
ì—¬ëŸ¬ ê°œì¸ ê²½ìš°, ëª¨ë“  ì˜ì¡´ì„±ì˜ ê°’ì´ ì´ì „ ë Œë”ë§ ë•Œì™€ ì •í™•íˆ ë™ì¼í•œ ê²½ìš°ì—ë§Œ Effect ì‹¤í–‰ì„ ê±´ë„ˆ ë›´ë‹¤.
(`Object.is` ë¹„êµë¡œ ì˜ì¡´ì„± ê°’ì„ ë¹„êµí•œë‹¤.)

ì§€ì •í•œ ì˜ì¡´ì„±ë“¤ì´ Effect ë‚´ë¶€ì˜ ì½”ë“œë¥¼ ê¸°ë°˜ìœ¼ë¡œ, Reactê°€ ì˜ˆìƒí•˜ëŠ” ê²ƒê³¼ ì¼ì¹˜í•˜ì§€ ì•Šìœ¼ë©´ lint ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤.
ì˜¤ë¥˜ì—ì„œ ìš”êµ¬í•˜ëŠ” ì˜ì¡´ì„±ì´ ë¶ˆí•„ìš”í•˜ë‹¤ë©´ Reactê°€ í•´ë‹¹ ì˜ì¡´ì„±ì„ í•„ìš”ë¡œ í•˜ì§€ ì•Šë„ë¡ Effect ë‚´ë¶€ì˜ ì½”ë“œë¥¼ ìˆ˜ì •í•˜ë„ë¡ í•˜ì.

Effect ì½”ë“œ ë‚´ë¶€ì—ì„œ ì‚¬ìš©ë˜ëŠ” ê°’ë“¤ ì¤‘ì—ì„œ ì•ˆì •ì ì¸ ì •ì²´ì„±ì„ ê°€ì§€ê³  ìˆëŠ” ê²½ìš°ì—ë§Œ ì˜ì¡´ì„±ì—ì„œ ìƒëµí•´ë„ ëœë‹¤. (ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ ìœ„ì—ì„œì²˜ëŸ¼ lint ì—ëŸ¬ë‚¨!)
ì–´ë–¤ ê²Œ ì•ˆì •ì ì¸ ê±°ì§€?
- ref ê°ì²´ 
ReactëŠ” ë Œë”ë§í•  ë•Œë§ˆë‹¤ ë™ì¼í•œ useRef í˜¸ì¶œë¡œë¶€í„° í•­ìƒ ê°™ì€ ê°ì²´ë¥¼ ë°˜í™˜í•  ê²ƒì„ ë³´ì¥í•œë‹¤.
- useState ì„¤ì •ì í•¨ìˆ˜
(í•˜ì§€ë§Œ ì´ refê°€ ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ë¡œë¶€í„° propìœ¼ë¡œ ì „ë‹¬ë°›ì€ ê²ƒì´ë¼ë©´,
í•­ìƒ ë™ì¼í•œ refë¥¼ ì „ë‹¬í•˜ëŠ”ì§€, ì—¬ëŸ¬ ref ì¤‘ í•˜ë‚˜ë¥¼ ì¡°ê±´ë¶€ë¡œ ì „ë‹¬í•˜ëŠ”ì§€ ì•Œ ìˆ˜ ì—†ê¸° ë•Œë¬¸ì—
ì´ê²ƒë„ ì•ˆì •ì ì´ì§€ ì•Šì•„ì„œ ì˜ì¡´ì„± ë°°ì—´ì— ì¶”ê°€í•´ì¤˜ì•¼ í•¨)

#### `[]` ì˜ì¡´ì„± ë°°ì—´
ì˜ì¡´ì„± ë°°ì—´ì´ ì—†ëŠ” ê²½ìš°ì™€ ë¹„ì–´ ìˆëŠ” ê²½ìš°ì˜ ë™ì‘ì€ ë‹¤ë¥´ë‹¤!!!

```jsx
useEffect(() => {
  // ë Œë”ì‹œë§ˆë‹¤ ì‹¤í–‰
});

useEffect(() => {
  // ì˜¤ì§ ë§ˆìš´íŠ¸ì‹œì—ë§Œ ì‹¤í–‰
}, []);
```

### 3) í•„ìš”í•œ ê²½ìš° cleanupì„ ì¶”ê°€í•œë‹¤.
- ì¼ë¶€ EffectëŠ” ìˆ˜í–‰ì¤‘ì´ë˜ ì‘ì—…ì„ ì¤‘ì§€, ì·¨ì†Œ, ì •ë¦¬í•˜ëŠ” ë°©ë²•ì„ ëª…ì‹œí•´ì•¼ í•œë‹¤.
ì˜ˆë¥¼ ë“¤ì–´ connect, subscribe, fetch í›„ì—ëŠ” disconnect, unsubscribe, cnacel ë˜ëŠ” ignoreì„ í•´ì¤˜ì•¼ í•¨.
- í´ë¦°ì—… í•¨ìˆ˜ëŠ” Effectê°€ ë‹¤ì‹œ ì‹¤í–‰ë˜ê¸° ì „ì— ë§¤ë²ˆ í˜¸ì¶œë˜ê³ , ì»´í¬ë„ŒíŠ¸ê°€ ì œê±°(unmount)ë  ë•Œ ë§ˆì§€ë§‰ìœ¼ë¡œ í•œ ë²ˆ ë” í˜¸ì¶œëœë‹¤.

## 3-4. Effect ì–¸ì œ ì¨ìš”?

### 1) Reactê°€ ì•„ë‹Œ ìœ„ì ¯ ì œì–´í•˜ê¸°
- Reactë¡œ ì‘ì„±í•˜ì§€ ì•Šì€ UI ìœ„ì ¯ ì¶”ê°€
ex) ì§€ë„ ì»´í¬ë„ŒíŠ¸ë¥¼ React ì½”ë“œì˜ zoomLevel stateì™€ ë™ê¸°í™”í•˜ë ¤ë©´

```jsx
useEffect(() => {
  const map = mapRef.current;
  map.setZoomLevel(zoomLevel);
}, [zoomLevel]);
```

- ë¸Œë¼ìš°ì €ì˜ ë¹ŒíŠ¸ì¸ `<dialog>`ì˜ showModal ë©”ì„œë“œ ì‚¬ìš©
ì´ ë©”ì„œë“œëŠ” ë‘ ë²ˆ í˜¸ì¶œí•˜ë©´ ì—ëŸ¬ë¥¼ ë˜ì§€ë¯€ë¡œ í´ë¦°ì—… í•¨ìˆ˜ê°€ í•„ìš”í•˜ë‹¤.

```jsx
useEffect(() => {
  const dialog = dialogRef.current;
  dialog.showModal();
  return () => dialog.close();
}, []);
```

### 2) ì´ë²¤íŠ¸ êµ¬ë…
- Effectê°€ ë¬´ì–¸ê°€ë¥¼ êµ¬ë…í•œë‹¤ë©´, í´ë¦°ì—… í•¨ìˆ˜ì—ì„œ êµ¬ë…ì„ ì·¨ì†Œí•´ì¤˜ì•¼ í•œë‹¤.

```jsx
useEffect(() => {
  function handleScroll(e) {
    console.log(window.scrollX, window.scrollY);
  }
  window.addEventListener('scroll', handleScroll);
  return () => window.removeEventListener('scroll', handleScroll);
}, []);
```

### 3) ì• ë‹ˆë©”ì´ì…˜ íŠ¸ë¦¬ê±°ë§
- Effectê°€ ë¬´ì–¸ê°€ë¥¼ ì• ë‹ˆë©”ì´ì…˜í™”í•œë‹¤ë©´, í´ë¦°ì—… í•¨ìˆ˜ì—ì„œ ì• ë‹ˆë©”ì´ì…˜ì„ ì´ˆê¸° ê°’ìœ¼ë¡œ ë¦¬ì…‹í•´ì•¼ í•œë‹¤.

```jsx
useEffect(() => {
  const node = ref.current;
  node.style.opacity = 1; // Trigger the animation
                          // ì• ë‹ˆë©”ì´ì…˜ ì´‰ë°œ
  return () => {
    node.style.opacity = 0; // Reset to the initial value
                            // ì´ˆê¸°ê°’ìœ¼ë¡œ ì¬ì„¤ì •
  };
}, []);
```

- tweeningì„ ì§€ì›í•˜ëŠ” third-party ì• ë‹ˆë©”ì´ì…˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°, í´ë¦°ì—… í•¨ìˆ˜ëŠ” íƒ€ì„ë¼ì¸ì„ ì´ˆê¸° ìƒíƒœë¡œ ë¦¬ì…‹í•´ì•¼ í•œë‹¤.
(tweening: "in-betweening"ì˜ ì¤„ì„ë§. í”„ë ˆì„ ì‚¬ì´ì˜ ì¤‘ê°„ ìƒíƒœë“¤ì„ ìƒì„±í•˜ì—¬ ì• ë‹ˆë©”ì´ì…˜ì„ ë¶€ë“œëŸ½ê²Œ ë§Œë“œëŠ” ê¸°ìˆ )

### 4) ë°ì´í„° fetch
- Effectì—ì„œ ë¬´ì–¸ê°€ë¥¼ fetchí•˜ë©´, í´ë¦°ì—… í•¨ìˆ˜ì—ì„œ fetchë¥¼ ì¤‘ë‹¨í•˜ê±°ë‚˜ ê·¸ ê²°ê³¼ë¥¼ ë¬´ì‹œí•´ì•¼ í•œë‹¤.

```jsx
useEffect(() => {
  let ignore = false;

  async function startFetching() {
    const json = await fetchTodos(userId);
    if (!ignore) {
      setTodos(json);
    }
  }

  startFetching();

  return () => {
    ignore = true;
  };
}, [userId]);
```

- ì´ë¯¸ ë°œìƒí•œ ë„¤íŠ¸ì›Œí¬ ìš”ì²­ì„ ì·¨ì†Œí•  ìˆ˜ëŠ” ì—†ìœ¼ë¯€ë¡œ, ëŒ€ì‹  í´ë¦°ì—… í•¨ìˆ˜ì—ì„œ ë” ì´ìƒ ê´€ë ¨ì´ ì—†ëŠ” fetchê°€ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ê³„ì† ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•Šë„ë¡ í•˜ê¸° ìœ„í•¨ì´ë‹¤.
ex) ë§Œì•½ userIdê°€ 'Alice'ì—ì„œ 'Bob'ìœ¼ë¡œ ë³€ê²½ë˜ë©´ í´ë¦°ì—…ì€ 'Alice' ì‘ë‹µì´ 'Bob' ì´í›„ì— ë„ì°©í•˜ë”ë¼ë„ ì´ë¥¼ ë¬´ì‹œí•˜ë„ë¡ í•œë‹¤.
